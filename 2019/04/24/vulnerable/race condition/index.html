<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="damn1t">
  <!-- Open Graph Data -->
  <meta property="og:title" content="web条件竞争"/>
  <meta property="og:description" content="404" />
  <meta property="og:site_name" content="damn1t"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://microvorld.com"/>
  
    <link rel="alternate" href="/atom.xml" title="damn1t" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>damn1t</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">web条件竞争</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/microvorld">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:<bubbl3@foxmail.com>">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By damn1t</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2019-04-24</span>
            <span class="time">15:05:06</span>
          </span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/race-condition/">#race condition</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h1 id="web条件竞争"><a href="#web条件竞争" class="headerlink" title="web条件竞争"></a>web条件竞争</h1><p>维基上的解释：</p>
<blockquote>
<p>A race condition or race hazard is the behavior of an electronics, software, or other system where the system’s substantive behavior is dependent on the sequence or timing of other uncontrollable events. It becomes a bug when one or more of the possible behaviors is undesirable.</p>
</blockquote>
<p>定义：</p>
<blockquote>
<p>条件竞争漏洞是一种服务器端的漏洞，由于服务器端在处理不同用户的请求时是并发进行的，因此，如果并发处理不当或相关操作逻辑顺序设计的不合理时，将会导致此类问题的发生。</p>
</blockquote>
<p>自我理解：由于服务器的并发机制，在多个用户访问同一个程序时，由于网络、资源等状况的不稳定，服务器可能无法确定谁会首先访问，从而造成资源竞争，发生越权或其他危害</p>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#-*-coding:utf-8-*-</span><br><span class="line">import threading</span><br><span class="line">COUNT = 0</span><br><span class="line"></span><br><span class="line">def Run(threads_name):</span><br><span class="line">	global COUNT</span><br><span class="line">	read_value = COUNT</span><br><span class="line">	print (&quot;COUNT in Thread-%s is %d&quot; %(str(threads_name), read_value))</span><br><span class="line">	COUNT = read_value + 1</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">	threads = []</span><br><span class="line">	for j in range(10):</span><br><span class="line">		t = threading.Thread(target=Run,args=(j,))</span><br><span class="line">		threads.append(t)</span><br><span class="line">		t.start()</span><br><span class="line">	for i in range(len(threads)):</span><br><span class="line">		threads[i].join()</span><br><span class="line">	print(&quot;Finally, The COUNT is %d&quot; %(COUNT,))</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">	main()</span><br></pre></td></tr></table></figure>
<p>事实上，条件竞争的利用条件可能会比较苛刻，这取决服务器的性能以及资源处理情况，将上面的程序运行n次，可能会得到8，9，10三个结果（至少我是这样）<br><img src="https://i.imgur.com/musMYQ9.png" alt=""><br>一种情况就是thread1访问完之后，thread2访问时，cpu依然认定count为0，从而两个线程同时加1造成资源争夺</p>
<blockquote>
<p>资源竞争是指，一个全局变量资源在多个线程或者进程中被同时调用，造成该全局变量资源不断的被修改</p>
</blockquote>
<p>reference：<br><a href="https://www.owasp.org/index.php/Testing_for_Race_Conditions_(OWASP-AT-010" target="_blank" rel="noopener">https://www.owasp.org/index.php/Testing_for_Race_Conditions_(OWASP-AT-010</a>)<br><a href="https://www.veracode.com/security/race-condition" target="_blank" rel="noopener">https://www.veracode.com/security/race-condition</a><br><a href="https://searchstorage.techtarget.com/definition/race-condition" target="_blank" rel="noopener">https://searchstorage.techtarget.com/definition/race-condition</a><br><a href="http://wiki.secbug.net/web_race-condtion.html" target="_blank" rel="noopener">http://wiki.secbug.net/web_race-condtion.html</a><br><a href="https://seaii-blog.com/index.php/2017/04/26/49.html" target="_blank" rel="noopener">https://seaii-blog.com/index.php/2017/04/26/49.html</a><br><a href="https://mengsec.com/2018/04/07/Race-Condition/" target="_blank" rel="noopener">https://mengsec.com/2018/04/07/Race-Condition/</a></p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

