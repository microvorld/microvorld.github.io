<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>web条件竞争 | </title>

  
  <meta name="author" content="damn1t">
  

  
  <meta name="description" content="web条件竞争维基上的解释：

A race condition or race hazard is the behavior of an electronics, software, or other system where the system’s substantive behavior i">
  

  
  
  <meta name="keywords" content="race condition">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="web条件竞争"/>

  <meta property="og:site_name" content=""/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/"></a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/categories">Categories</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>web条件竞争</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2019/04/24/vulnerable/race condition/" rel="bookmark">
        <time class="entry-date published" datetime="2019-04-24T15:02:48.475Z">
          2019-04-24
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h1 id="web条件竞争"><a href="#web条件竞争" class="headerlink" title="web条件竞争"></a>web条件竞争</h1><p>维基上的解释：</p>
<blockquote>
<p>A race condition or race hazard is the behavior of an electronics, software, or other system where the system’s substantive behavior is dependent on the sequence or timing of other uncontrollable events. It becomes a bug when one or more of the possible behaviors is undesirable.</p>
</blockquote>
<p>定义：</p>
<blockquote>
<p>条件竞争漏洞是一种服务器端的漏洞，由于服务器端在处理不同用户的请求时是并发进行的，因此，如果并发处理不当或相关操作逻辑顺序设计的不合理时，将会导致此类问题的发生。</p>
</blockquote>
<p>自我理解：由于服务器的并发机制，在多个用户访问同一个程序时，由于网络、资源等状况的不稳定，服务器可能无法确定谁会首先访问，从而造成资源竞争，发生越权或其他危害</p>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#-*-coding:utf-8-*-</span><br><span class="line">import threading</span><br><span class="line">COUNT = 0</span><br><span class="line"></span><br><span class="line">def Run(threads_name):</span><br><span class="line">	global COUNT</span><br><span class="line">	read_value = COUNT</span><br><span class="line">	print (&quot;COUNT in Thread-%s is %d&quot; %(str(threads_name), read_value))</span><br><span class="line">	COUNT = read_value + 1</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">	threads = []</span><br><span class="line">	for j in range(10):</span><br><span class="line">		t = threading.Thread(target=Run,args=(j,))</span><br><span class="line">		threads.append(t)</span><br><span class="line">		t.start()</span><br><span class="line">	for i in range(len(threads)):</span><br><span class="line">		threads[i].join()</span><br><span class="line">	print(&quot;Finally, The COUNT is %d&quot; %(COUNT,))</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">	main()</span><br></pre></td></tr></table></figure>
<p>事实上，条件竞争的利用条件可能会比较苛刻，这取决服务器的性能以及资源处理情况，将上面的程序运行n次，可能会得到8，9，10三个结果（至少我是这样）<br><img src="https://i.imgur.com/musMYQ9.png" alt=""><br>一种情况就是thread1访问完之后，thread2访问时，cpu依然认定count为0，从而两个线程同时加1造成资源争夺</p>
<blockquote>
<p>资源竞争是指，一个全局变量资源在多个线程或者进程中被同时调用，造成该全局变量资源不断的被修改</p>
</blockquote>
<p>reference：<br><a href="https://www.owasp.org/index.php/Testing_for_Race_Conditions_(OWASP-AT-010" target="_blank" rel="noopener">https://www.owasp.org/index.php/Testing_for_Race_Conditions_(OWASP-AT-010</a>)<br><a href="https://www.veracode.com/security/race-condition" target="_blank" rel="noopener">https://www.veracode.com/security/race-condition</a><br><a href="https://searchstorage.techtarget.com/definition/race-condition" target="_blank" rel="noopener">https://searchstorage.techtarget.com/definition/race-condition</a><br><a href="http://wiki.secbug.net/web_race-condtion.html" target="_blank" rel="noopener">http://wiki.secbug.net/web_race-condtion.html</a><br><a href="https://seaii-blog.com/index.php/2017/04/26/49.html" target="_blank" rel="noopener">https://seaii-blog.com/index.php/2017/04/26/49.html</a><br><a href="https://mengsec.com/2018/04/07/Race-Condition/" target="_blank" rel="noopener">https://mengsec.com/2018/04/07/Race-Condition/</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/race-condition/">race condition</a>
    </span>
    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2019 damn1t
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>