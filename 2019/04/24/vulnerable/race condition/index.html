<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="microworld,bubbl3@foxmail.com"><title>web条件竞争 · null</title><meta name="description" content="web条件竞争维基上的解释：

A race condition or race hazard is the behavior of an electronics, software, or other system where the system’s substantive behavior i"><meta name="keywords" content="security,pentest,personal"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/"></a></h3><div class="description"><p>及时行乐.</p></div></div></div><ul class="social-links"><li><a href="https://twitter.com/www.baidu.com"><i class="fa fa-twitter"></i></a></li><li><a href="http://weibo.com/www.baidu.com"><i class="fa fa-weibo"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">Sobre</a></li><li><a href="/archives">Arquivo</a></li><li><a href="/links">Links</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>web条件竞争</a></h3></div><div class="post-content"><h1 id="web条件竞争"><a href="#web条件竞争" class="headerlink" title="web条件竞争"></a>web条件竞争</h1><p>维基上的解释：</p>
<blockquote>
<p>A race condition or race hazard is the behavior of an electronics, software, or other system where the system’s substantive behavior is dependent on the sequence or timing of other uncontrollable events. It becomes a bug when one or more of the possible behaviors is undesirable.</p>
</blockquote>
<p>定义：</p>
<blockquote>
<p>条件竞争漏洞是一种服务器端的漏洞，由于服务器端在处理不同用户的请求时是并发进行的，因此，如果并发处理不当或相关操作逻辑顺序设计的不合理时，将会导致此类问题的发生。</p>
</blockquote>
<p>自我理解：由于服务器的并发机制，在多个用户访问同一个程序时，由于网络、资源等状况的不稳定，服务器可能无法确定谁会首先访问，从而造成资源竞争，发生越权或其他危害</p>
<h2 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#-*-coding:utf-8-*-</span><br><span class="line">import threading</span><br><span class="line">COUNT = 0</span><br><span class="line"></span><br><span class="line">def Run(threads_name):</span><br><span class="line">	global COUNT</span><br><span class="line">	read_value = COUNT</span><br><span class="line">	print (&quot;COUNT in Thread-%s is %d&quot; %(str(threads_name), read_value))</span><br><span class="line">	COUNT = read_value + 1</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">	threads = []</span><br><span class="line">	for j in range(10):</span><br><span class="line">		t = threading.Thread(target=Run,args=(j,))</span><br><span class="line">		threads.append(t)</span><br><span class="line">		t.start()</span><br><span class="line">	for i in range(len(threads)):</span><br><span class="line">		threads[i].join()</span><br><span class="line">	print(&quot;Finally, The COUNT is %d&quot; %(COUNT,))</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">	main()</span><br></pre></td></tr></table></figure>
<p>事实上，条件竞争的利用条件可能会比较苛刻，这取决服务器的性能以及资源处理情况，将上面的程序运行n次，可能会得到8，9，10三个结果（至少我是这样）<br><img src="https://i.imgur.com/musMYQ9.png" alt=""><br>一种情况就是thread1访问完之后，thread2访问时，cpu依然认定count为0，从而两个线程同时加1造成资源争夺</p>
<blockquote>
<p>资源竞争是指，一个全局变量资源在多个线程或者进程中被同时调用，造成该全局变量资源不断的被修改</p>
</blockquote>
<p>reference：<br><a href="https://www.owasp.org/index.php/Testing_for_Race_Conditions_(OWASP-AT-010" target="_blank" rel="noopener">https://www.owasp.org/index.php/Testing_for_Race_Conditions_(OWASP-AT-010</a>)<br><a href="https://www.veracode.com/security/race-condition" target="_blank" rel="noopener">https://www.veracode.com/security/race-condition</a><br><a href="https://searchstorage.techtarget.com/definition/race-condition" target="_blank" rel="noopener">https://searchstorage.techtarget.com/definition/race-condition</a><br><a href="http://wiki.secbug.net/web_race-condtion.html" target="_blank" rel="noopener">http://wiki.secbug.net/web_race-condtion.html</a><br><a href="https://seaii-blog.com/index.php/2017/04/26/49.html" target="_blank" rel="noopener">https://seaii-blog.com/index.php/2017/04/26/49.html</a><br><a href="https://mengsec.com/2018/04/07/Race-Condition/" target="_blank" rel="noopener">https://mengsec.com/2018/04/07/Race-Condition/</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-04-24</span><i class="fa fa-tag"></i><a class="tag" href="/tags/race-condition/" title="race condition">race condition </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://microvorld.com/2019/04/24/vulnerable/race condition/,null,web条件竞争,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2019/04/27/cpp/单双冒号区别/" title="c++中冒号（:）和双冒号（::）的用法">Post Anterior</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/04/24/git相关/git使用/" title="git基本使用">Próximo post</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>